도커(Docker) 빌드 캐시는 이미지 생성 속도를 높이고, 불필요한 중복 작업을 줄여줍니다. 캐시를 효율적으로 활용하는 주요 방법은 다음과 같습니다.

---

## 1. 캐시 활용의 원리

- **레이어 캐싱:** Docker는 Dockerfile의 각 명령어마다 레이어를 생성하며, 이전에 빌드된 동일한 레이어가 있다면 이를 재사용합니다. 동일한 레이어가 재사용되면 빌드 속도가 크게 향상됩니다.[johnny-developer-story.tistory+2](https://johnny-developer-story.tistory.com/2)
    
- **캐시 무효화:** 어떤 명령어 레이어가 변경되면 그 이후의 모든 레이어는 새로 빌드됩니다. 즉, 자주 변경되는 명령어는 Dockerfile에서 하단에 배치해야 캐시 효율이 높아집니다.[gloryyam.tistory+1](https://gloryyam.tistory.com/32)
    

---

## 2. 캐시 활용 전략

- **변경되지 않는 명령부터 배치:** 의존성 설치(`RUN npm install` 등)나 환경설정 등 자주 변경되지 않는 작업을 상단에, 소스코드 복사나 빌드 등 자주 변경되는 작업은 하단에 배치해야 캐시를 최대한 재활용할 수 있습니다.[johnny-developer-story.tistory+1](https://johnny-developer-story.tistory.com/2)
    
- **멀티스테이지 빌드:** 최종 이미지에는 필요한 파일만 복사하여 불필요한 캐시를 줄이고, 빌드 용량도 줄일 수 있습니다.[johnny-developer-story.tistory](https://johnny-developer-story.tistory.com/2)
    
- **외부 캐시 활용:** `--cache-from` 옵션을 통해 원격 레지스트리나 이전 빌드 이미지의 캐시를 활용할 수 있습니다. CI 환경에서 캐시가 공유되어 빌드 속도가 더욱 빨라집니다.[gitlab-docs.infograb+1](https://gitlab-docs.infograb.net/ee/ci/docker/docker_layer_caching.html)
    

---

## 3. 실전 Dockerfile 예시

text

`# 1. 의존성 설치(변경 적음) COPY package*.json ./ RUN npm install # 2. 소스 코드 복사(변경 많음) COPY . . # 3. 빌드 실행 RUN npm run build`

- 위 구조는 의존성 설치를 먼저 실행해서, 코드 변경시에도 `npm install` 단계의 캐시를 최대한 재활용합니다.[johnny-developer-story.tistory](https://johnny-developer-story.tistory.com/2)
    

---

## 4. 캐시 무시 혹은 관리

- **강제로 캐시 무시:** 필요에 따라 새로 빌드를 진행해야 할 때는 `docker build --no-cache` 옵션을 사용합니다.[malwareanalysis.tistory+1](https://malwareanalysis.tistory.com/236)
    
- **빌드 캐시 정리:** 사용하지 않는 캐시는 `docker builder prune` 또는 `docker buildx prune` 명령어로 정리할 수 있습니다.[labex](https://labex.io/ko/tutorials/docker-how-to-use-docker-buildx-prune-command-to-manage-build-cache-555061)
    
- **원격 캐시 적용:** 최신 도커에서는 BuildKit과 `--build-arg BUILDKIT_INLINE_CACHE=1`, `--cache-from` 등을 함께 사용해 원격 캐시(예: 컨테이너 레지스트리)로부터 레이어를 불러올 수 있습니다.[data-surfer.tistory+1](https://data-surfer.tistory.com/32)
    

---

## 5. 참고 명령어

- 캐시 사용:  
    `docker build --cache-from [이미지]`
    
- 캐시 무시:  
    `docker build --no-cache .`
    
- 빌드 캐시 정리:  
    `docker builder prune` 또는  
    `docker buildx prune`
    

---

이렇게 Docker 빌드 캐시를 잘 활용하면, 빌드 속도를 크게 향상하고, 디스크 공간도 효율적으로 사용할 수 있습니다.[malwareanalysis.tistory+4](https://malwareanalysis.tistory.com/236)

1. [https://johnny-developer-story.tistory.com/2](https://johnny-developer-story.tistory.com/2)
2. [https://malwareanalysis.tistory.com/236](https://malwareanalysis.tistory.com/236)
3. [https://gloryyam.tistory.com/32](https://gloryyam.tistory.com/32)
4. [https://labex.io/ko/tutorials/docker-how-to-use-docker-buildx-prune-command-to-manage-build-cache-555061](https://labex.io/ko/tutorials/docker-how-to-use-docker-buildx-prune-command-to-manage-build-cache-555061)
5. [https://gitlab-docs.infograb.net/ee/ci/docker/docker_layer_caching.html](https://gitlab-docs.infograb.net/ee/ci/docker/docker_layer_caching.html)
6. [https://data-surfer.tistory.com/32](https://data-surfer.tistory.com/32)
7. [https://makepluscode.tistory.com/entry/Docker-%EC%BA%90%EC%8B%9C-%EC%82%AD%EC%A0%9C%ED%95%98%EA%B3%A0-%EC%9E%AC%EB%B9%8C%EB%93%9C%ED%95%98%EA%B8%B0](https://makepluscode.tistory.com/entry/Docker-%EC%BA%90%EC%8B%9C-%EC%82%AD%EC%A0%9C%ED%95%98%EA%B3%A0-%EC%9E%AC%EB%B9%8C%EB%93%9C%ED%95%98%EA%B8%B0)
8. [https://tech.kakaoent.com/front-end/2022/220414-docker-cache/](https://tech.kakaoent.com/front-end/2022/220414-docker-cache/)
9. [https://giken.tistory.com/entry/%ED%9A%A8%EC%9C%A8%EC%A0%81%EC%9D%B8-Docker-%EB%B9%8C%EB%93%9C-%EC%BA%90%EC%8B%9C%EB%A5%BC-%ED%99%9C%EC%9A%A9%ED%95%9C-%EC%86%8D%EB%8F%84-%EA%B0%9C%EC%84%A0](https://giken.tistory.com/entry/%ED%9A%A8%EC%9C%A8%EC%A0%81%EC%9D%B8-Docker-%EB%B9%8C%EB%93%9C-%EC%BA%90%EC%8B%9C%EB%A5%BC-%ED%99%9C%EC%9A%A9%ED%95%9C-%EC%86%8D%EB%8F%84-%EA%B0%9C%EC%84%A0)
10. [https://kimjingo.tistory.com/228](https://kimjingo.tistory.com/228)