
### ğŸ“Œ ë¬¸ì œ ë°°ê²½

Seleniumì„ í™œìš©í•œ í¬ë¡¤ë§ ì„œë¹„ìŠ¤ë¥¼ ë¦¬ëˆ…ìŠ¤ ì„œë²„ì—ì„œ ì¥ì‹œê°„ ìš´ì˜í•˜ë˜ ì¤‘, ì£¼ê¸°ì ìœ¼ë¡œ ChromeDriver ì„¸ì…˜ì„ ì¢…ë£Œí•˜ê³  ìƒˆë¡œ ìƒì„±í•¨ì—ë„ ë¶ˆêµ¬í•˜ê³  **í¬ë¡¬ í”„ë¡œì„¸ìŠ¤ê°€ ê³„ì†í•´ì„œ ì„œë²„ì— ë‚¨ì•„ ìŒ“ì´ëŠ” í˜„ìƒ**ì„ ë°œê²¬í•˜ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤.

ë¦¬ëˆ…ìŠ¤ ì„œë²„ì— `chrome_crashpad_handler`ì™€ ê°™ì€ **í•˜ìœ„ í”„ë¡œì„¸ìŠ¤ê°€ PPID=1ì¸ ìƒíƒœë¡œ ê³„ì† ëˆ„ì ** ë˜ì–´ ìˆì—ˆê³ , ì´ëŠ” ë©”ëª¨ë¦¬ ì ìœ  ë° ì‹œìŠ¤í…œ ì„±ëŠ¥ ì €í•˜ ë¬¸ì œë¡œ ì´ì–´ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
ë¬¸ì œê°€ ë°œìƒí•˜ê¸° ì „ì— ê¸°ì¡´ ë¡œì§ì—ì„œ **Chrome ê³ ì•„ í”„ë¡œì„¸ìŠ¤ ìë™ ì •ë¦¬** ë¡œì§ì„ ë°˜ì˜í•˜ì˜€ìŠµë‹ˆë‹¤.

ë°œê²¬ì€ ìˆ˜ì§‘ì„ ëª¨ë‘ ì™„ë£Œí–ˆê¸° ë•Œë¬¸ì— í”„ë¡œì„¸ìŠ¤ë¥¼ ì¢…ë£Œí•˜ë ¤ê³  `ps -ef`ë¡œ í™•ì¸í•˜ë©´ì„œ í¬ë¡¬ í”„ë¡œì„¸ìŠ¤ê°€ ì—¬ëŸ¬ ê°œ ì‚´ì•„ìˆëŠ” ìƒíƒœë¥¼ ë°œê²¬í•˜ì˜€ìŠµë‹ˆë‹¤.

![[í¬ë¡¬ í”„ë¡œì„¸ìŠ¤.png]]

---

### ğŸ” ê¸°ë³¸ ì¡°ê±´ ì ê²€

ë¨¼ì € ì¼ë°˜ì ìœ¼ë¡œ ë°œìƒí•  ìˆ˜ ìˆëŠ” ì‹¤ìˆ˜ë¥¼ ì ê²€í•´ë³´ì•˜ìŠµë‹ˆë‹¤.
1) `driver.quit()` ì´ ì¡´ì¬í•˜ëŠ” ë¡œì§ì„ ì œëŒ€ë¡œ ì•ˆíƒ€ê³  ìˆëŠ”ì§€?
	â¡ï¸ ì •ìƒì ìœ¼ë¡œ ì„¸ì…˜ ì¢…ë£Œ ì£¼ê¸°ë§ˆë‹¤ quit()ì„ í˜¸ì¶œí•˜ê³  ë“œë¼ì´ë²„ì˜ ì„¸ì…˜IDë„ ì´ˆê¸°í™” ë¨
2) driver ì˜µì…˜ì— ì•ˆì •ì„± ì˜µì…˜ ì ìš©ì´ ëˆ„ë½ë˜ì—ˆëŠ”ì§€?
	â¡ï¸ `--no-sandbox`, `--disable-dev-shm-usage`, `--headless` ë“± ì•ˆì •ì„± ì˜µì…˜ ì ìš©ë¨
    

í•˜ì§€ë§Œ ì´ ì¡°ê±´ë“¤ì´ ëª¨ë‘ ì¶©ì¡±ëœ ìƒíƒœì—ì„œë„ **í”„ë¡œì„¸ìŠ¤ ëˆ„ì  í˜„ìƒ**ì´ ë°œìƒí•˜ê³  ìˆì—ˆìŠµë‹ˆë‹¤.

---

### âš ï¸ ì›ì¸ ë¶„ì„

ë¬¸ì œì˜ ì›ì¸ì„ ë³´ë‹¤ ì •ë°€í•˜ê²Œ íŒŒì•…í•˜ê¸° ìœ„í•´ í”„ë¡œì„¸ìŠ¤ ìƒíƒœë¥¼ ì¡°ì‚¬í–ˆìŠµë‹ˆë‹¤.

```bash
ps -ef | grep chrome | awk '$3 == 1'
```

í•´ë‹¹ ëª…ë ¹ì–´ëŠ” **ë¶€ëª¨ í”„ë¡œì„¸ìŠ¤ ID(PPID)ê°€ 1**ì¸, ì¦‰ **init(systemd)ì˜ ìì‹ í”„ë¡œì„¸ìŠ¤ë¡œ ë‚¨ì•„ ìˆëŠ” ê³ ì•„ í”„ë¡œì„¸ìŠ¤**ë¥¼ í•„í„°ë§í•©ë‹ˆë‹¤.  
ì´ë¥¼ í†µí•´ `chrome`, `chromedriver`ì™€ ê´€ë ¨ëœ **ì •ìƒì ìœ¼ë¡œ ì¢…ë£Œë˜ì§€ ì•Šì€ í”„ë¡œì„¸ìŠ¤ë“¤ì´ ê³ ì•„ ìƒíƒœë¡œ ë‚¨ì•„ ìˆë‹¤ëŠ” ì‚¬ì‹¤**ì„ í™•ì¸í•  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤.

ì´ëŠ” Seleniumì´ ë‚´ë¶€ì ìœ¼ë¡œ ìƒì„±í•˜ëŠ” ì—¬ëŸ¬ í•˜ìœ„ í”„ë¡œì„¸ìŠ¤(e.g., crashpad_handler, zygote, utility ë“±)ê°€ `driver.quit()` ì´í›„ì—ë„ **ì •ìƒì ìœ¼ë¡œ ì¢…ë£Œë˜ì§€ ì•Šê±°ë‚˜**, ChromeDriverì˜ **ì„¸ì…˜ ì¢…ë£Œ íƒ€ì´ë° ì´ìŠˆ**ë¡œ ì¸í•´ ë°œìƒí•˜ëŠ” ê²ƒìœ¼ë¡œ ì¶”ì •ë©ë‹ˆë‹¤.

---

### ğŸ›  í•´ê²° ë°©ë²•

#### 1. ê³ ì•„ í”„ë¡œì„¸ìŠ¤ ìˆ˜ë™ ì •ë¦¬ ëª…ë ¹ì–´

```bash
ps -ef | grep chrome | grep -v grep | awk '$3 == 1 {print $2}' | xargs kill -9
```

í•´ë‹¹ ëª…ë ¹ì–´ëŠ”:

- `chrome`ì´ í¬í•¨ëœ í”„ë¡œì„¸ìŠ¤ ì¤‘
    
- ë¶€ëª¨ PIDê°€ 1ì¸ ê³ ì•„ í”„ë¡œì„¸ìŠ¤ë§Œ í•„í„°ë§í•œ í›„
    
- `kill -9`ë¡œ ê°•ì œ ì¢…ë£Œí•©ë‹ˆë‹¤.
    

#### 2. Javaì—ì„œ ìë™í™” ì²˜ë¦¬

```java
public void killOrphanChromeProcesses(String keyword) {
    try {
        String cmd = "ps -ef | grep " + keyword + " | grep -v grep | awk '$3 == 1 {print $2}' | xargs kill -9";
        Runtime.getRuntime().exec(new String[]{"bash", "-c", cmd});
    } catch (IOException e) {
        e.printStackTrace();
    }
}
```

```java
// ì˜ˆì‹œ ì‚¬ìš©
killOrphanChromeProcesses("chrome");
killOrphanChromeProcesses("chromedriver");
```

#### 3. ì£¼ê¸°ì ì¸ ìë™ ì‹¤í–‰ (cron ì¶”ì²œ)

```bash
*/30 * * * * /usr/bin/bash -c 'ps -ef | grep chrome | grep -v grep | awk "$3 == 1 {print \$2}" | xargs kill -9'
```

â†’ 30ë¶„ë§ˆë‹¤ ê³ ì•„ ìƒíƒœì˜ í¬ë¡¬ í”„ë¡œì„¸ìŠ¤ë¥¼ ì •ë¦¬í•˜ì—¬ ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ë¥¼ ë°©ì§€í•©ë‹ˆë‹¤.

---

### ğŸ§© ì¶”ê°€ ì ê²€ ì‚¬í•­

- ChromeDriverì™€ ì‹¤ì œ ì„¤ì¹˜ëœ Chrome ë²„ì „ì´ ì •í™•íˆ ì¼ì¹˜í•˜ëŠ”ì§€ í™•ì¸
    
    ```bash
    google-chrome --version
    chromedriver --version
    ```
    
- í•„ìš” ì‹œ ë¡œê·¸ë¡œ ë‚¨ì€ PIDë¥¼ ê¸°ë¡í•˜ê³  ëª¨ë‹ˆí„°ë§ ë„ì… (Prometheus, Grafana ë“±)
    

---

## âš™ï¸ ê¸°ì¡´ ë¡œì§ íë¦„

```text
Selenium ë¡œì§ ì‹¤í–‰
  â””â”€ driverê°€ null? â†’ driver ê°ì²´ ìƒì„±, ì„¸ì…˜ ID ì €ì¥
      â””â”€ ìˆ˜ì§‘ê¸° ì‹¤í–‰
          â”œâ”€ ì„¸ì…˜ ë§Œë£Œ ì‹œ: driver.quit(), ì„¸ì…˜ ID null
          â””â”€ ì˜ˆì™¸ or ìˆ˜ì§‘ ì¢…ë£Œ ì‹œ: driver.quit(), ì„¸ì…˜ ID null
```

- ë¬¸ì œì : `driver.quit()` í˜¸ì¶œë§Œìœ¼ë¡œëŠ” **í•˜ìœ„ í”„ë¡œì„¸ìŠ¤(crashpad ë“±)** ê°€ ëª¨ë‘ ì¢…ë£Œë˜ì§€ ì•ŠìŒ
    
- ëˆ„ì  í™•ì¸ ëª…ë ¹ì–´:
    
    ```bash
    ps -ef | grep chrome | awk '$3 == 1'
    ```
    

---

## ğŸ”§ ê°œì„ ëœ ë¡œì§ íë¦„

```text
Selenium ë¡œì§ ì‹¤í–‰
  â””â”€ driverê°€ null? â†’ driver ê°ì²´ ìƒì„±, ì„¸ì…˜ ID ì €ì¥
      â””â”€ ìˆ˜ì§‘ê¸° ì‹¤í–‰
          â”œâ”€ ì„¸ì…˜ ë§Œë£Œ ì‹œ:
          â”‚    â”œâ”€ PPID=1 chrome í”„ë¡œì„¸ìŠ¤ ê²€ìƒ‰ í›„ ì¢…ë£Œ
          â”‚    â””â”€ driver.quit(), ì„¸ì…˜ ID null
          â””â”€ ì˜ˆì™¸ or ìˆ˜ì§‘ ì¢…ë£Œ ì‹œ:
               â”œâ”€ PPID=1 chrome í”„ë¡œì„¸ìŠ¤ ê²€ìƒ‰ í›„ ì¢…ë£Œ
               â””â”€ driver.quit(), ì„¸ì…˜ ID null
```

- í•µì‹¬ ë³€ê²½ì : **ì¢…ë£Œ ì‹œì ì— driver ì™¸ì— ë‚¨ì•„ ìˆëŠ” Chrome ê´€ë ¨ ê³ ì•„ í”„ë¡œì„¸ìŠ¤(PPID=1)ë¥¼ ì§ì ‘ ì¡°íšŒ ë° ê°•ì œ ì¢…ë£Œ**
    

---

## ğŸ” ë¡œê·¸ ê¸°ë°˜ í™•ì¸

#### âœ… ì¢…ë£Œ ì§ì „ ë¡œê·¸

```
[2025-07-15 13:20:53]  INFO - ì¢…ë£Œ ëŒ€ìƒ í”„ë¡œì„¸ìŠ¤ : root | 1545661 | 1 | ... | chrome_crashpad_handler ...
[2025-07-15 13:20:53]  INFO - ì¢…ë£Œ ëŒ€ìƒ í”„ë¡œì„¸ìŠ¤ : root | 1545663 | 1 | ... | chrome_crashpad_handler ...
[2025-07-15 13:20:53]  INFO - ì¢…ë£Œ ì „ WebDriver ì„¸ì…˜ ID: 5cfbb797713718a30dda12bc95b7dbf0
[2025-07-15 13:20:54]  INFO - ê¸°ì¡´ WebDriver ì„¸ì…˜ ì¢…ë£Œ
```

#### âœ… ìƒˆë¡œìš´ ì„¸ì…˜ ì—°ê²° ì´í›„

```
[2025-07-15 13:21:26]  INFO - âœ… ChromeDriver ìƒì„±ë¨ - ì„¸ì…˜ ID: 38388b7a965aedc25c5c0b4f378e4604
[2025-07-15 13:21:26]  INFO - ë„¤ì´ë²„ì§€ë„ ìµœì´ˆ ì ‘ì†
```

#### âœ… ì¢…ë£Œ ì´í›„ ë‚¨ì•„ ìˆëŠ” í”„ë¡œì„¸ìŠ¤ í™•ì¸

```bash
ps -ef | grep chrome | awk '$3 == 1'
```

ê²°ê³¼:

```text
root     1546155  1  0 13:21 ? 00:00:00 /opt/google/chrome/chrome_crashpad_handler ...
root     1546157  1  0 13:21 ? 00:00:00 /opt/google/chrome/chrome_crashpad_handler ...
```

â†’ ìƒˆë¡œìš´ driver ì„¸ì…˜ ìƒì„± í›„ì—ë„ **crashpad_handlerê°€ ì—¬ì „íˆ PPID=1 ìƒíƒœë¡œ ë‚¨ì•„ ìˆìŒ**  
â†’ **ì¢…ë£Œ ë£¨í‹´ ë‚´ì—ì„œ ê°•ì œ kill ì²˜ë¦¬ í•„ìš”**

---

## ğŸ§ª ì ìš©ëœ ê°œì„  ì½”ë“œ (Java)

```java
ChromeOptions options = new ChromeOptions();
options.addArguments(arguments);
options.setExperimentalOption("detach", false); // í”„ë¡œì„¸ìŠ¤ê°€ ë°±ê·¸ë¼ìš´ë“œì— ë‚¨ì§€ì•Šë„ë¡
```
ë“œë¼ì´ë²„ ì‹¤í–‰ ì˜µì…˜ ì¤‘ driver.quit() í˜¸ì¶œ ì‹œ ë¸Œë¼ìš°ì € ì°½ê³¼ í”„ë¡œì„¸ìŠ¤ê°€ í•¨ê»˜ ì¢…ë£Œë˜ëŠ” ì„¤ì •ê°’ì„ ì§€ì •.
í•´ë‹¹ ì˜µì…˜ì„ ëª…ì‹œí•˜ì§€ ì•Šë”ë¼ë„ ê¸°ë³¸ê°’ì´ falseì´ì§€ë§Œ, ëª…í™•íˆ ì ëŠ”ê²ƒì´ ë¡œì§ìƒ ì•ˆì „í•˜ë¯€ë¡œ ì„¤ì •ê°’ì„ ì¶”ê°€í•¨.


```java	
	/* ì„œë²„ ì‹¤í–‰ ì‹œ í¬ë¡¬ ê³ ì•„ í”„ë¡œì„¸ìŠ¤ ì •ë¦¬ */
	public void killOrphanByChrome() {
        try {
            // PPIDê°€ 1ì¸ í”„ë¡œì„¸ìŠ¤ ì „ì²´ ì¡°íšŒ
            String command = "ps -ef | awk '$3 == 1'";
            Process process = Runtime.getRuntime().exec(new String[] {"bash", "-c", command});
            BufferedReader reader = new BufferedReader(new InputStreamReader(process.getInputStream()));
            String line;

            while ((line = reader.readLine()) != null) {
                if (line.contains("chrome")) {
                    String[] parts = line.trim().split("\\s+");
                    if (parts.length > 1) {
                        String pid = parts[1]; // PIDëŠ” ë‘ ë²ˆì§¸ ì—´
                        LOGGER.info("ì¢…ë£Œ ëŒ€ìƒ í”„ë¡œì„¸ìŠ¤ : " + String.join(" | ", parts) );
                        Runtime.getRuntime().exec("kill -9 " + pid);
                    }
                }
            }

        } catch (IOException e) {
            e.printStackTrace();
        }
    }
```

ê³ ì•„ í”„ë¡œì„¸ìŠ¤ë¥¼ ì •ë¦¬í•˜ëŠ” ë©”ì„œë“œëŠ”  driver.quit() ë¥¼ í˜¸ì¶œí•˜ê¸° ì „ ì‹¤í–‰í•˜ë„ë¡ ì¶”ê°€í•¨
ë¶€ëª¨ PIDê°€ 1ì¸ í¬ë¡¬ í”„ë¡œì„¸ìŠ¤ë¥¼ ê²€ìƒ‰í•˜ê³ , í”„ë¡œì„¸ìŠ¤ë¥¼ ì£½ì´ê³ , ë“œë¼ì´ë²„  quitë¡œ ì„¸ì…˜ì„ ì¢…ë£Œí•˜ë„ë¡ í•˜ì—¬ ì•ˆì „í•˜ê²Œ í”„ë¡œì„¸ìŠ¤ì™€ ë“œë¼ì´ë²„ ê°ì²´ ì´ˆê¸°í™”ê¹Œì§€ í•  ìˆ˜ ìˆìŒ


í™•ì¸ ë¡œê·¸

```shell
[2025-07-15 16:29:51]  INFO (runner.Class - tagetStoreSearch:342) -             í¬ë¡¬ ì„¸ì…˜ ì—°ê²° 30ë¶„ ì§€ë‚¨.. ì„¸ì…˜ ì¬ ì—°ê²°
[2025-07-15 16:29:52]  INFO (runner.Class - killOrphanByChrome:2692) - ì¢…ë£Œ ëŒ€ìƒ í”„ë¡œì„¸ìŠ¤ : root | 1563762 | 1 | 0 | 16:23 | ? | 00:00:00 | /opt/google/chrome/chrome_crashpad_handler | --monitor-self | --monitor-self-annotation=ptype=crashpad-handler | 
[2025-07-15 16:29:52]  INFO (runner.Class - killOrphanByChrome:2692) - ì¢…ë£Œ ëŒ€ìƒ í”„ë¡œì„¸ìŠ¤ : root | 1563764 | 1 | 0 | 16:23 | ? | 00:00:00 | /opt/google/chrome/chrome_crashpad_handler | 
[2025-07-15 16:29:52]  INFO (runner.Class - getReConnectSeleniumWebDriver:2657) - âœ…ì¢…ë£Œ ì „ WebDriver ì„¸ì…˜ ID: a88799802c90d734379f9a55e9150a3a
[2025-07-15 16:29:52]  INFO (runner.Class - getReConnectSeleniumWebDriver:2660) - ê¸°ì¡´ WebDriver ì„¸ì…˜ ì¢…ë£Œ
[2025-07-15 16:29:52]  INFO (runner.Class - getReConnectSeleniumWebDriver:2663) - âœ…ì¢…ë£Œ í›„ ê¸°ì¡´ driver.getSessionId(): null
[2025-07-15 16:30:14]  INFO (runner.Class - getConnectSeleniumWebDriver:2635) - âœ…ChromeDriver ìƒì„±ë¨ - ì„¸ì…˜ ID: f3079cfed4724a64c7b6f099ee2b05d5

```


### âœ… ë§ˆë¬´ë¦¬

`driver.quit()` í˜¸ì¶œë§Œìœ¼ë¡œëŠ” ì™„ì „í•œ í”„ë¡œì„¸ìŠ¤ ì •ë¦¬ê°€ ë³´ì¥ë˜ì§€ ì•ŠëŠ” ê²½ìš°ê°€ ìˆìŠµë‹ˆë‹¤. íŠ¹íˆ í¬ë¡¬ì˜ êµ¬ì¡°ìƒ ì—¬ëŸ¬ í•˜ìœ„ í”„ë¡œì„¸ìŠ¤ê°€ ë¶„ë¦¬ë˜ì–´ ì‹¤í–‰ë˜ê¸° ë•Œë¬¸ì—, **ê³ ì•„ ìƒíƒœë¡œ ë‚¨ì€ í”„ë¡œì„¸ìŠ¤ë¥¼ ì£¼ê¸°ì ìœ¼ë¡œ ê°ì‹œí•˜ê³  ì •ë¦¬** í•´ì•¼ ì„œë²„ ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ ë° ì„±ëŠ¥ ì €í•˜ë¥¼ ì˜ˆë°©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.




`#selenium` `#chromedriver` `#ë¦¬ëˆ…ìŠ¤í”„ë¡œì„¸ìŠ¤` `#í¬ë¡¬ê³ ì•„í”„ë¡œì„¸ìŠ¤` `#í¬ë¡¤ë§ì„œë²„ìš´ì˜` `#í”„ë¡œì„¸ìŠ¤ì •ë¦¬` `#driver.quit` `#í¬ë¡¬ë©”ëª¨ë¦¬ëˆ„ìˆ˜`